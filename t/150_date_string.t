#!perl
use strict;
use warnings;

use Test::More;

BEGIN {
    use_ok('Chrono::Date');
}

while (<DATA>) {
    next if /\A \# /x;
    chomp;
    my ($y, $m, $d, @dates) = split /,\s*/, $_;

    my $exp = sprintf '%.4d-%.2d-%.2d', $y, $m, $d;

    foreach my $string (@dates) {
        my $date = Chrono::Date->from_string($string);
        my $from = "->from_string($string)";
        is($date->year,         $y,   "$from->year");
        is($date->month,        $m,   "$from->month");
        is($date->day_of_month, $d,   "$from->day_of_month");
        is($date->to_string,    $exp, "$from->to_string");
    }
}

done_testing;

__DATA__
1905,  5,  3, 1905-123, 1905123, 1905-05-03, 19050503, 1905-W18-3, 1905W183, 1905-Q2-33, 1905Q233
1914, 12, 30, 1914-364, 1914364, 1914-12-30, 19141230, 1914-W53-3, 1914W533, 1914-Q4-91, 1914Q491
1929,  8,  6, 1929-218, 1929218, 1929-08-06, 19290806, 1929-W32-2, 1929W322, 1929-Q3-37, 1929Q337
1939,  5, 26, 1939-146, 1939146, 1939-05-26, 19390526, 1939-W21-5, 1939W215, 1939-Q2-56, 1939Q256
1946, 10,  2, 1946-275, 1946275, 1946-10-02, 19461002, 1946-W40-3, 1946W403, 1946-Q4-02, 1946Q402
1948,  9, 28, 1948-272, 1948272, 1948-09-28, 19480928, 1948-W40-2, 1948W402, 1948-Q3-90, 1948Q390
1954, 11, 23, 1954-327, 1954327, 1954-11-23, 19541123, 1954-W47-2, 1954W472, 1954-Q4-54, 1954Q454
1956,  2, 11, 1956-042, 1956042, 1956-02-11, 19560211, 1956-W06-6, 1956W066, 1956-Q1-42, 1956Q142
1959,  3, 30, 1959-089, 1959089, 1959-03-30, 19590330, 1959-W14-1, 1959W141, 1959-Q1-89, 1959Q189
1971,  1, 20, 1971-020, 1971020, 1971-01-20, 19710120, 1971-W03-3, 1971W033, 1971-Q1-20, 1971Q120
1974,  3, 30, 1974-089, 1974089, 1974-03-30, 19740330, 1974-W13-6, 1974W136, 1974-Q1-89, 1974Q189
1984,  5,  5, 1984-126, 1984126, 1984-05-05, 19840505, 1984-W18-6, 1984W186, 1984-Q2-35, 1984Q235
1987, 10, 22, 1987-295, 1987295, 1987-10-22, 19871022, 1987-W43-4, 1987W434, 1987-Q4-22, 1987Q422
1993, 12, 17, 1993-351, 1993351, 1993-12-17, 19931217, 1993-W50-5, 1993W505, 1993-Q4-78, 1993Q478
1994,  6, 27, 1994-178, 1994178, 1994-06-27, 19940627, 1994-W26-1, 1994W261, 1994-Q2-88, 1994Q288
2003, 11, 14, 2003-318, 2003318, 2003-11-14, 20031114, 2003-W46-5, 2003W465, 2003-Q4-45, 2003Q445
2006,  4, 24, 2006-114, 2006114, 2006-04-24, 20060424, 2006-W17-1, 2006W171, 2006-Q2-24, 2006Q224
2014,  7, 25, 2014-206, 2014206, 2014-07-25, 20140725, 2014-W30-5, 2014W305, 2014-Q3-25, 2014Q325
2016,  5,  7, 2016-128, 2016128, 2016-05-07, 20160507, 2016-W18-6, 2016W186, 2016-Q2-37, 2016Q237
2017, 10,  7, 2017-280, 2017280, 2017-10-07, 20171007, 2017-W40-6, 2017W406, 2017-Q4-07, 2017Q407
2029,  7,  4, 2029-185, 2029185, 2029-07-04, 20290704, 2029-W27-3, 2029W273, 2029-Q3-04, 2029Q304
2031, 11, 22, 2031-326, 2031326, 2031-11-22, 20311122, 2031-W47-6, 2031W476, 2031-Q4-53, 2031Q453
2032,  5, 13, 2032-134, 2032134, 2032-05-13, 20320513, 2032-W20-4, 2032W204, 2032-Q2-43, 2032Q243
2039, 12,  7, 2039-341, 2039341, 2039-12-07, 20391207, 2039-W49-3, 2039W493, 2039-Q4-68, 2039Q468
2043,  6,  9, 2043-160, 2043160, 2043-06-09, 20430609, 2043-W24-2, 2043W242, 2043-Q2-70, 2043Q270
2048,  6, 11, 2048-163, 2048163, 2048-06-11, 20480611, 2048-W24-4, 2048W244, 2048-Q2-72, 2048Q272
2063,  3,  1, 2063-060, 2063060, 2063-03-01, 20630301, 2063-W09-4, 2063W094, 2063-Q1-60, 2063Q160
2068, 11, 20, 2068-325, 2068325, 2068-11-20, 20681120, 2068-W47-2, 2068W472, 2068-Q4-51, 2068Q451
2070,  9, 15, 2070-258, 2070258, 2070-09-15, 20700915, 2070-W38-1, 2070W381, 2070-Q3-77, 2070Q377
2091,  3, 14, 2091-073, 2091073, 2091-03-14, 20910314, 2091-W11-3, 2091W113, 2091-Q1-73, 2091Q173
2095,  3, 14, 2095-073, 2095073, 2095-03-14, 20950314, 2095-W11-1, 2095W111, 2095-Q1-73, 2095Q173
2102, 10, 15, 2102-288, 2102288, 2102-10-15, 21021015, 2102-W41-7, 2102W417, 2102-Q4-15, 2102Q415
2104,  9, 27, 2104-271, 2104271, 2104-09-27, 21040927, 2104-W39-6, 2104W396, 2104-Q3-89, 2104Q389
2120,  1, 15, 2120-015, 2120015, 2120-01-15, 21200115, 2120-W03-1, 2120W031, 2120-Q1-15, 2120Q115
2124,  2, 26, 2124-057, 2124057, 2124-02-26, 21240226, 2124-W08-6, 2124W086, 2124-Q1-57, 2124Q157
2127,  1, 13, 2127-013, 2127013, 2127-01-13, 21270113, 2127-W03-1, 2127W031, 2127-Q1-13, 2127Q113
2132,  5,  4, 2132-125, 2132125, 2132-05-04, 21320504, 2132-W18-7, 2132W187, 2132-Q2-34, 2132Q234
2136, 10, 23, 2136-297, 2136297, 2136-10-23, 21361023, 2136-W43-2, 2136W432, 2136-Q4-23, 2136Q423
2140, 12, 24, 2140-359, 2140359, 2140-12-24, 21401224, 2140-W51-6, 2140W516, 2140-Q4-85, 2140Q485
2148,  7,  1, 2148-183, 2148183, 2148-07-01, 21480701, 2148-W27-1, 2148W271, 2148-Q3-01, 2148Q301
2155,  9, 16, 2155-259, 2155259, 2155-09-16, 21550916, 2155-W38-2, 2155W382, 2155-Q3-78, 2155Q378
2156,  8, 11, 2156-224, 2156224, 2156-08-11, 21560811, 2156-W33-3, 2156W333, 2156-Q3-42, 2156Q342
2173,  1, 12, 2173-012, 2173012, 2173-01-12, 21730112, 2173-W02-2, 2173W022, 2173-Q1-12, 2173Q112
2182,  4,  4, 2182-094, 2182094, 2182-04-04, 21820404, 2182-W14-4, 2182W144, 2182-Q2-04, 2182Q204
2182,  9, 20, 2182-263, 2182263, 2182-09-20, 21820920, 2182-W38-5, 2182W385, 2182-Q3-82, 2182Q382
2186,  3, 22, 2186-081, 2186081, 2186-03-22, 21860322, 2186-W12-3, 2186W123, 2186-Q1-81, 2186Q181
2186, 11, 25, 2186-329, 2186329, 2186-11-25, 21861125, 2186-W47-6, 2186W476, 2186-Q4-56, 2186Q456
2190, 10, 29, 2190-302, 2190302, 2190-10-29, 21901029, 2190-W43-5, 2190W435, 2190-Q4-29, 2190Q429
2193, 11, 17, 2193-321, 2193321, 2193-11-17, 21931117, 2193-W46-7, 2193W467, 2193-Q4-48, 2193Q448
2198,  3, 31, 2198-090, 2198090, 2198-03-31, 21980331, 2198-W13-6, 2198W136, 2198-Q1-90, 2198Q190
